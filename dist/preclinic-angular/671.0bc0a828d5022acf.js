"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[671],{30671:(Qe,ue,f)=>{f.d(ue,{by:()=>Ve}),f(94650),f(40445);var R=f(21281),_=f(95017),L=(f(83353),f(67376),f(36895),f(77579)),S=(f(50457),f(61135)),T=(f(45191),f(39646));f(82722),f(95698);var ne=f(56451),W=f(39841),Q=f(54004);class $e extends _.o2{get data(){return this._data.value}set data(n){n=Array.isArray(n)?n:[],this._data.next(n),this._renderChangesSubscription||this._filterData(n)}get filter(){return this._filter.value}set filter(n){this._filter.next(n),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(n){this._sort=n,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(n){this._paginator=n,this._updateChangeSubscription()}constructor(n=[]){super(),this._renderData=new S.X([]),this._filter=new S.X(""),this._internalPageChanges=new L.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,a)=>{const r=e[a];if((0,R.t6)(r)){const i=Number(r);return i<9007199254740991?i:r}return r},this.sortData=(e,a)=>{const r=a.active,i=a.direction;return r&&""!=i?e.sort((s,l)=>{let d=this.sortingDataAccessor(s,r),h=this.sortingDataAccessor(l,r);const c=typeof d,m=typeof h;c!==m&&("number"===c&&(d+=""),"number"===m&&(h+=""));let u=0;return null!=d&&null!=h?d>h?u=1:d<h&&(u=-1):null!=d?u=1:null!=h&&(u=-1),u*("asc"==i?1:-1)}):e},this.filterPredicate=(e,a)=>{const r=Object.keys(e).reduce((s,l)=>s+e[l]+"\u25ec","").toLowerCase(),i=a.trim().toLowerCase();return-1!=r.indexOf(i)},this._data=new S.X(n),this._updateChangeSubscription()}_updateChangeSubscription(){const n=this._sort?(0,ne.T)(this._sort.sortChange,this._sort.initialized):(0,T.of)(null),e=this._paginator?(0,ne.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,T.of)(null),r=(0,W.a)([this._data,this._filter]).pipe((0,Q.U)(([l])=>this._filterData(l))),i=(0,W.a)([r,n]).pipe((0,Q.U)(([l])=>this._orderData(l))),s=(0,W.a)([i,e]).pipe((0,Q.U)(([l])=>this._pageData(l)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=s.subscribe(l=>this._renderData.next(l))}_filterData(n){return this.filteredData=null==this.filter||""===this.filter?n:n.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(n){return this.sort?this.sortData(n.slice(),this.sort):n}_pageData(n){if(!this.paginator)return n;const e=this.paginator.pageIndex*this.paginator.pageSize;return n.slice(e,e+this.paginator.pageSize)}_updatePaginator(n){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=n,e.pageIndex>0)){const a=Math.ceil(e.length/e.pageSize)-1||0,r=Math.min(e.pageIndex,a);r!==e.pageIndex&&(e.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}class Ve extends $e{}}}]);