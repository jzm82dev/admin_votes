"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[7131],{47131:(re,_,c)=>{c.r(_),c.d(_,{OwnerModule:()=>ie});var p=c(36895),u=c(30027),e=c(94650);let v=(()=>{const o=class{};let t=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-owner"]],decls:1,vars:0,template:function(n,r){1&n&&e._UZ(0,"router-outlet")},dependencies:[u.lC]}),t})();var m=c(30671),h=c(46382),f=c(98013),g=c(42466),d=c(24006),w=c(84385),T=c(3238),b=c(96308);const A=["closebutton"];function x(t,o){if(1&t&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.Q6J("value",s.building),e.xp6(1),e.hij(" ",s.building," ")}}const C=function(t){return["/owner/edit/",t,1]};function y(t,o){if(1&t&&(e.TgZ(0,"a",63),e._UZ(1,"i",64),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t){const s=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(4,C,s.id)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"commun_translations.edit"),"")}}function U(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"a",65),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.selectUrbanisation(n))}),e._UZ(1,"i",66),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"commun_translations.remove"),""))}function q(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",56)(10,"div",57)(11,"a",58),e._UZ(12,"i",59),e.qZA(),e.TgZ(13,"div",60),e.YNc(14,y,4,6,"a",61),e.YNc(15,U,4,3,"a",62),e.qZA()()()()),2&t){const s=o.$implicit,i=e.oxw();e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.building),e.xp6(2),e.AsE("",s.floor," ",s.letter,""),e.xp6(2),e.Oqu(s.total_coefficient),e.xp6(6),e.Q6J("ngIf",i.hasPermission("edit_urbanisations")),e.xp6(1),e.Q6J("ngIf",i.hasPermission("edit_urbanisations"))}}function O(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"li",68),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.moveToPage(n.currentPage-2))}),e.TgZ(1,"a",69),e._uU(2," ... "),e.qZA()()}if(2&t){const s=e.oxw(2);e.Q6J("hidden",1===s.currentPage)}}function k(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"li",68),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.moveToPage(n.currentPage+2))}),e.TgZ(1,"a",69),e._uU(2," ... "),e.qZA()()}if(2&t){const s=e.oxw(2);e.Q6J("hidden",s.currentPage>=s.pageNumberArray[s.pageNumberArray.length-2]||s.totalData<s.serialNumberArray[s.serialNumberArray.length-1])}}function J(t,o){if(1&t){const s=e.EpF();e.ynx(0),e.TgZ(1,"li",52)(2,"a",54),e.NdJ("click",function(){const r=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.moveToPage(r))}),e._uU(3),e.qZA()(),e.YNc(4,O,3,1,"li",67),e.YNc(5,k,3,1,"li",67),e.BQk()}if(2&t){const s=o.$implicit,i=o.index,n=e.oxw();e.xp6(1),e.ekj("active",s===n.currentPage),e.Q6J("ngClass",n.pageNumberArray[n.currentPage-2]>s&&1!==s&&n.pageNumberArray.length>6||n.pageNumberArray[n.currentPage]<s&&1!==s&&n.pageNumberArray.length>6&&n.pageNumberArray.length!==s?"hide-page-no":"show-page-no"),e.xp6(2),e.hij(" ",s," "),e.xp6(1),e.Q6J("ngIf",0===i&&n.pageNumberArray.length>6&&n.currentPage>2),e.xp6(1),e.Q6J("ngIf",i===n.pageNumberArray.length-2&&n.pageNumberArray.length>6)}}const M=function(t){return["/urbanisation/list/edit",t]},N=function(){return{standalone:!0}},Z=function(t){return{disabled:t}},L=["closebutton"];function E(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"button",57),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.saveData())}),e._uU(3),e.ALo(4,"translate"),e.qZA()()()}2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"commun_translations.save")))}function Q(t,o){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.Oqu(s)}}function S(t,o){if(1&t&&(e.TgZ(0,"ul"),e.YNc(1,Q,2,1,"li",31),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.message_errors)}}function D(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.TgZ(6,"button",60),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.cleanMessage())}),e._UZ(7,"span",61),e.qZA(),e.YNc(8,S,2,1,"ul",50),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,3,"commun_translations.error")," "),e.xp6(2),e.hij(" ",s.error_message," "),e.xp6(3),e.Q6J("ngIf",s.message_errors.length>0)}}function I(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",58)(1,"div",62)(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.TgZ(6,"button",60),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.cleanMessage())}),e._UZ(7,"span",61),e.qZA()()()}if(2&t){const s=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,2,"commun_translations.success")," "),e.xp6(2),e.hij(" ",s.success_message," ")}}function F(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.openPopup())}),e._uU(1,"Nueva Propiedad"),e.qZA()}}function j(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.selectProperty(n))}),e._UZ(1,"i",71),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"commun_translations.remove"),""))}function Y(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",64)(6,"div",65)(7,"a",66),e._UZ(8,"i",67),e.qZA(),e.TgZ(9,"div",68),e.YNc(10,j,4,3,"a",69),e.qZA()()()()),2&t){const s=o.$implicit,i=e.oxw();e.xp6(2),e.hij("",s.name," "),e.xp6(2),e.hij(" ",s.coefficient," "),e.xp6(6),e.Q6J("ngIf",i.hasPermission("edit_urbanisations"))}}function H(t,o){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.Oqu(s)}}function z(t,o){if(1&t&&(e.TgZ(0,"ul"),e.YNc(1,H,2,1,"li",31),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.message_errors)}}function K(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"strong"),e._uU(3,"Error!"),e.qZA(),e._uU(4),e.TgZ(5,"button",60),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.cleanMessage())}),e._UZ(6,"span",61),e.qZA(),e.YNc(7,z,2,1,"ul",50),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(4),e.hij(" ",s.error_message_popup," "),e.xp6(3),e.Q6J("ngIf",s.message_errors.length>0)}}function V(t,o){if(1&t&&(e.TgZ(0,"div",58)(1,"div",62)(2,"strong"),e._uU(3,"Bien!"),e.qZA(),e._uU(4),e.qZA()()),2&t){const s=e.oxw();e.xp6(4),e.hij(" ",s.susccess_message_popup," ")}}function G(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.addProperty())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"commun_translations.save")))}function $(t,o){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij("\xbfEst\xe1s seguro de borrar la propiedad \xa0",s.property_selected.name," ?")}}const B=function(t){return["/owner/list/edit",t]},X=function(t){return["/owner/list",t]},R=[{path:"",component:v,children:[{path:"list/:urbanisation_id",component:(()=>{const o=class{constructor(i,n,r){this.ownerSrv=i,this.translate=n,this.activateRoute=r,this.ownersList=[],this.routes=h._,this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=18,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.owners_general=[],this.statusText="",this.error_message="",this.can_edit=!1,this.translations=[],this.kind_sport=[],this.type_sport="0",this.building_id="",this.building=[],this.urbanisation_id=""}ngOnInit(){this.initializeLanguage(),this.user=this.ownerSrv.authSrv.user,this.hasPermission(),this.config(),this.activateRoute.params.subscribe(i=>{this.urbanisation_id=i.urbanisation_id,this.getTableData()})}config(){this.ownerSrv.config().subscribe(i=>{this.building=i.building})}initializeLanguage(){this.translate.use(this.ownerSrv.authSrv.language),this.translate.setDefaultLang(this.ownerSrv.authSrv.language),this.translate.get(["commun_translations","club_translations","club_translations.club_information_messages"]).subscribe(i=>{this.translations=i})}getTableData(i=1,n=""){this.ownersList=[],this.serialNumberArray=[],this.ownerSrv.listOwners(i,this.searchDataValue,this.urbanisation_id,this.building_id).subscribe(r=>{this.totalData=r.total,this.ownersList=r.owners.data,this.dataSource=new m.by(this.ownersList),this.calculateTotalPages(this.totalData,this.pageSize)})}hasPermission(i=""){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes("edit_club"))&&(this.can_edit=!0,!0)}getTableDataGeneral(){new p.uU("en-US"),this.ownersList=[],this.serialNumberArray=[],this.owners_general.map((n,r)=>{const a=r+1;r>=this.skip&&a<=this.limit&&(this.ownersList.push(n),this.serialNumberArray.push(a))}),this.dataSource=new m.by(this.ownersList),this.calculateTotalPages(this.totalData,this.pageSize)}searchData(i){this.currentPage=1,this.dataSource.filter=i.trim().toLowerCase(),this.getTableData(this.currentPage,this.searchDataValue)}sortData(i){const n=this.ownersList.slice();this.ownersList=i.active&&""!==i.direction?n.sort((r,a)=>(r[i.active]<a[i.active]?-1:1)*("asc"===i.direction?1:-1)):n}getMoreData(i){"next"==i?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage)):"previous"==i&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage))}moveToPage(i){this.currentPage=i,this.skip=this.pageSelection[i-1].skip,this.limit=this.pageSelection[i-1].limit,i>this.currentPage?this.pageIndex=i-1:i<this.currentPage&&(this.pageIndex=i+1),this.getTableData(this.currentPage)}refresh(){this.pageSelection=[],this.searchDataValue="",this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}calculateTotalPages(i,n){this.pageNumberArray=[],this.totalPages=i/n,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var r=1;r<=this.totalPages;r++){const a=n*r,l=a-n;this.pageNumberArray.push(r),this.pageSelection.push({skip:l,limit:a})}}selectOwner(i){this.court_selected=i}cleanMessage(){this.error_message=""}removeOwner(){}selectUrbanisation(i){}};let t=o;return o.\u0275fac=function(n){return new(n||o)(e.Y36(f.T),e.Y36(g.sK),e.Y36(u.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-owner"]],viewQuery:function(n,r){if(1&n&&e.Gf(A,5),2&n){let a;e.iGM(a=e.CRH())&&(r.closebutton=a.first)}},decls:83,vars:20,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],[1,"feather","icon-chevron-right"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],["placeholder","Edificio",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"add-group"],["routerLink","/owners/add-owner","routerLinkActive","router-link-active",1,"btn","btn-primary","add-pluss","ms-2"],["src","assets/img/icons/plus.svg","alt",""],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],["href","javascript:;",1,"me-2"],["src","assets/img/icons/pdf-icon-01.svg","alt",""],["src","assets/img/icons/pdf-icon-02.svg","alt",""],["src","assets/img/icons/pdf-icon-03.svg","alt",""],["href","javascript:;"],["src","assets/img/icons/pdf-icon-04.svg","alt",""],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","name"],["mat-sort-header","building"],["mat-sort-header","floor"],["mat-sort-header","ratio"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[3,"value"],[1,"text-end"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item","href","#",3,"routerLink",4,"ngIf"],["class","dropdown-item","href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_owner_modal",3,"click",4,"ngIf"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-pen-to-square","m-r-5"],["href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_owner_modal",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6),e._uU(7,"Dashboard"),e.qZA(),e.TgZ(8,"li",7),e._UZ(9,"i",8),e.qZA(),e.TgZ(10,"li",6),e._uU(11,"Urbanizaci\xf3n"),e.qZA()()()()(),e.TgZ(12,"div",9)(13,"ul",10)(14,"li",11)(15,"a",12),e._uU(16,"Datos generales"),e.qZA()(),e.TgZ(17,"li",13)(18,"a",12),e._uU(19,"Propietarios"),e.qZA()()()(),e.TgZ(20,"div",3)(21,"div",4)(22,"div",14)(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"h3"),e._uU(29,"Listado propietarios"),e.qZA(),e.TgZ(30,"div",20)(31,"div",21)(32,"input",22),e.NdJ("ngModelChange",function(l){return r.searchDataValue=l})("ngModelChange",function(){return r.searchData(r.searchDataValue)}),e.qZA(),e.TgZ(33,"a",23),e._UZ(34,"img",24),e.qZA()(),e.TgZ(35,"div",18)(36,"div",21)(37,"mat-select",25),e.NdJ("ngModelChange",function(l){return r.building_id=l})("ngModelChange",function(){return r.searchData(r.searchDataValue)}),e.YNc(38,x,2,2,"mat-option",26),e.qZA()(),e.TgZ(39,"div",27)(40,"a",28),e._UZ(41,"img",29),e.qZA(),e.TgZ(42,"a",30),e.NdJ("click",function(){return r.refresh()}),e._UZ(43,"img",31),e.qZA()()()()(),e.TgZ(44,"div",32)(45,"a",33),e._UZ(46,"img",34),e.qZA(),e.TgZ(47,"a",33),e._UZ(48,"img",35),e.qZA(),e.TgZ(49,"a",33),e._UZ(50,"img",36),e.qZA(),e.TgZ(51,"a",37),e._UZ(52,"img",38),e.qZA()()()(),e.TgZ(53,"div",39)(54,"table",40),e.NdJ("matSortChange",function(l){return r.sortData(l)}),e.TgZ(55,"thead")(56,"tr")(57,"th",41),e._uU(58,"Nombre"),e.qZA(),e.TgZ(59,"th",42),e._uU(60,"Bloque"),e.qZA(),e.TgZ(61,"th",43),e._uU(62,"Piso"),e.qZA(),e.TgZ(63,"th",44),e._uU(64,"Coeficiente"),e.qZA(),e._UZ(65,"th"),e.qZA()(),e.TgZ(66,"tbody"),e.YNc(67,q,16,7,"tr",45),e.qZA()(),e._UZ(68,"br"),e.TgZ(69,"div",46)(70,"div",47)(71,"div",48),e._uU(72),e.qZA()(),e.TgZ(73,"div",49)(74,"div",50)(75,"ul",51)(76,"li",52)(77,"a",53),e.NdJ("click",function(){return r.getMoreData("previous")}),e._uU(78,"Previous"),e.qZA()(),e.YNc(79,J,6,6,"ng-container",45),e.TgZ(80,"li",52)(81,"a",54),e.NdJ("click",function(){return r.getMoreData("next")}),e._uU(82,"Next "),e.qZA()()()()()()()()()()()()()()),2&n&&(e.xp6(15),e.Q6J("routerLink",e.VKq(13,M,r.urbanisation_id)),e.xp6(3),e.Q6J("routerLink",r.routes.owners),e.xp6(14),e.Q6J("ngModel",r.searchDataValue),e.xp6(5),e.Q6J("ngModel",r.building_id)("ngModelOptions",e.DdM(15,N)),e.xp6(1),e.Q6J("ngForOf",r.building),e.xp6(29),e.Q6J("ngForOf",r.ownersList),e.xp6(5),e.lnq(" Showing ",r.serialNumberArray[0]," to ",r.serialNumberArray[r.serialNumberArray.length-1]," of ",r.totalData," entries "),e.xp6(4),e.Q6J("ngClass",e.VKq(16,Z,1===r.currentPage)),e.xp6(3),e.Q6J("ngForOf",r.pageNumberArray),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Z,r.currentPage===r.pageNumberArray[r.pageNumberArray.length-1]||0===r.ownersList.length)))},dependencies:[p.mk,p.sg,p.O5,u.rH,u.Od,d.Fj,d.JJ,d.On,w.gD,T.ey,b.YE,b.nU,g.X$]}),t})()},{path:"edit/:id/:urbanisation_id",component:(()=>{const o=class{constructor(i,n){this.ownerSrv=i,this.activateRoute=n,this.routes=h._,this.owner_id="",this.name="",this.urbanisation_id="",this.building="",this.floor="",this.letter="",this.total_coefficient="",this.properties=[],this.urbanisation_name="",this.new_property="",this.new_coefficient="",this.can_edit=!1,this.isLoaded=!1,this.error_message="",this.message_errors=[],this.success_message="",this.error_message_popup="",this.susccess_message_popup=""}ngOnInit(){this.user=this.ownerSrv.authSrv.user,this.activateRoute.params.subscribe(i=>{this.owner_id=i.id,this.getOwnerSelected()})}getOwnerSelected(){this.ownerSrv.getOwner(this.owner_id).subscribe(i=>{this.owner_selected=i.owner,this.name=this.owner_selected.name,this.urbanisation_id=this.owner_selected.urbanisation_id,this.building=this.owner_selected.building,this.floor=this.owner_selected.floor,this.letter=this.owner_selected.letter,this.total_coefficient=this.owner_selected.total_coefficient,this.properties=this.owner_selected.properties,this.urbanisation_name=this.owner_selected.urbanisation.name,this.isLoaded=!0})}openPopup(){this.new_property="",this.new_coefficient="",this.error_message_popup="",this.susccess_message_popup="",this.message_errors=[]}closePopup(){this.susccess_message_popup="",this.error_message="",this.message_errors=[]}cleanMessage(){this.error_message="",this.success_message="",this.message_errors=[]}hasPermission(i){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes(i))&&(this.can_edit=!0,!0)}selectProperty(i){this.property_selected=i}saveData(){if(this.cleanMessage(),!(this.name&&this.building&&this.floor&&this.letter))return void(this.error_message="Nombre, edificio, planta y letra son obligatorios");if(this.name&&this.name.length>191)return void(this.error_message="El nombre no puede superar los 191 caracteres");if(this.building&&this.building.length>50)return void(this.error_message="El edificio no puede superar los 50 caracteres");let i=new FormData;i.append("name",this.name),i.append("building",this.building),i.append("floor",this.floor),i.append("letter",this.letter),this.ownerSrv.updateOwner(this.owner_id,i).subscribe(n=>{200==n.message?this.success_message="Propietario guardado correctamente":422==n.message?(this.error_message="Ha habido el siguiente error al guardar el propietario",this.message_errors=n.errors_text):this.error_message="Error interno del sistema. Int\xe9ntalo nuevamente y si el problema persiste contacte con el adminitrador."})}removeProperty(){this.ownerSrv.removeProperty(this.property_selected.id).subscribe(i=>{if(200==i.message){let n=this.properties.findIndex(r=>r.id==this.property_selected.id);-1!=n&&(this.properties.splice(n,1),this.total_coefficient=i.current_total_coefficient,this.closebutton.nativeElement.click(),this.property_selected=null)}else 422==i.message?(this.error_message="Ha habido un error al eliminar la propiedad los datos.",this.message_errors=i.errors_text):this.error_message="Ha habido un error al eliminar la propiedad los datos. Consulte con el administrador"})}addProperty(){if(!this.new_property||!this.new_coefficient)return void(this.error_message="El nombre del inmueble y coeficiente son obligatorios");if(this.new_property&&this.new_property.length>191)return void(this.error_message="El nombre no puede superar los 191 caracteres");if(this.new_coefficient&&this.new_coefficient.length>10)return void(this.error_message="El coeficiente no puede superar los 10 caraceteres");let i=new FormData;i.append("owner_id",this.owner_id),i.append("name",this.new_property),i.append("owner_name","PEPITO GRILLO"),i.append("coefficient",this.new_coefficient),this.ownerSrv.addProperty(i).subscribe(n=>{this.susccess_message_popup="",this.error_message="",this.message_errors=[],200==n.message?(this.total_coefficient=n.total_coefficient,this.susccess_message_popup="Inmueble a\xf1adido correctamente",this.properties.unshift(n.new_property)):422==n.message?(this.error_message="Ha habido un error al a\xf1adir la propiedad los datos. Int\xe9ntalo nuevamente.",this.message_errors=n.errors_text):this.error_message="Ha habido un error al a\xf1adir la propiedad los datos. Consulte con el administrador"})}};let t=o;return o.\u0275fac=function(n){return new(n||o)(e.Y36(f.T),e.Y36(u.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-owner"]],viewQuery:function(n,r){if(1&n&&e.Gf(L,5),2&n){let a;e.iGM(a=e.CRH())&&(r.closebutton=a.first)}},decls:140,vars:29,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],[1,"login-danger"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","urbanisation_name","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-4","col-xl-4"],["name","building","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","floor","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","letter","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","total_coefficient","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group mb-0 text-end",4,"ngIf"],["class","col-md-12 my-4",4,"ngIf"],[1,"col-12","my-4","text-center"],[1,"doctor-submit","text-center"],["type","button","class","btn btn-success submit-form me-2","data-bs-toggle","modal","data-bs-target","#add_property",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","border-0","custom-table","comman-table","datatable","mb-0"],[4,"ngFor","ngForOf"],[1,"col-12","my-4"],[1,"doctor-submit","text-end"],["type","submit",1,"btn","btn-primary","cancel-form",3,"routerLink"],["id","add_property","role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],[1,"col-12","col-md-12","col-xl-12"],[1,"col-6","col-md-6","col-xl-12","my-4","text-center"],["name","new_property","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","new_coefficient","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","my-2","center"],[1,"m-t-20","text-center"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1",3,"click"],["closebuttonAddShedule",""],["type","submit","style","width: auto;","class","btn btn-primary text-white",3,"click",4,"ngIf"],["id","delete_spent","role","dialog",1,"modal","fade","delete-modal"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["closebutton",""],["type","submit",1,"btn","btn-danger",3,"click"],[1,"form-group","mb-0","text-end"],[1,"settings-btns"],["type","submit",1,"border-0","btn","btn-primary","btn-gradient-primary","btn-rounded",3,"click"],[1,"col-md-12","my-4"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-toggle","modal","data-bs-target","#add_property",1,"btn","btn-success","submit-form","me-2",3,"click"],[1,"text-end"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item","href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_spent",3,"click",4,"ngIf"],["href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_spent",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["type","submit",1,"btn","btn-primary","text-white",2,"width","auto",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Urbanizacion "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Propietario"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"form")(18,"div",3)(19,"div",12)(20,"div",13)(21,"h4"),e._uU(22,"Datos del propietario"),e.qZA()()(),e.TgZ(23,"div",14)(24,"div",15)(25,"label"),e._uU(26,"Nombre "),e.TgZ(27,"span",16),e._uU(28,"*"),e.qZA()(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(l){return r.name=l}),e.qZA()()(),e.TgZ(30,"div",14)(31,"div",15)(32,"label"),e._uU(33,"Urbanizaci\xf3n "),e.TgZ(34,"span",16),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"input",18),e.NdJ("ngModelChange",function(l){return r.urbanisation_name=l}),e.qZA()()(),e.TgZ(37,"div",19)(38,"div",15)(39,"label"),e._uU(40,"Edificio "),e.TgZ(41,"span",16),e._uU(42,"*"),e.qZA()(),e.TgZ(43,"input",20),e.NdJ("ngModelChange",function(l){return r.building=l}),e.qZA()()(),e.TgZ(44,"div",19)(45,"div",15)(46,"label"),e._uU(47,"Piso "),e.TgZ(48,"span",16),e._uU(49,"*"),e.qZA()(),e.TgZ(50,"input",21),e.NdJ("ngModelChange",function(l){return r.floor=l}),e.qZA()()(),e.TgZ(51,"div",19)(52,"div",15)(53,"label"),e._uU(54,"Letra "),e.TgZ(55,"span",16),e._uU(56,"*"),e.qZA()(),e.TgZ(57,"input",22),e.NdJ("ngModelChange",function(l){return r.letter=l}),e.qZA()()(),e.TgZ(58,"div",19)(59,"div",15)(60,"label"),e._uU(61,"Total coeficiente "),e.TgZ(62,"span",16),e._uU(63,"*"),e.qZA()(),e.TgZ(64,"input",23),e.NdJ("ngModelChange",function(l){return r.total_coefficient=l}),e.qZA()()()(),e.YNc(65,E,5,3,"div",24),e.YNc(66,D,9,5,"div",25),e.YNc(67,I,8,4,"div",25),e.TgZ(68,"div",26)(69,"div",27),e.YNc(70,F,2,0,"button",28),e.qZA()(),e.TgZ(71,"div",3)(72,"div",4)(73,"div",10)(74,"div",11)(75,"div",3)(76,"div",13)(77,"h4"),e._uU(78,"Inmuebles"),e.qZA()()()(),e.TgZ(79,"div",29)(80,"table",30)(81,"thead")(82,"tr")(83,"th"),e._uU(84,"Propiedad"),e.qZA(),e.TgZ(85,"th"),e._uU(86,"Coeficiente"),e.qZA(),e._UZ(87,"th"),e.qZA()(),e.TgZ(88,"tbody"),e.YNc(89,Y,11,3,"tr",31),e.qZA()()()()()(),e.TgZ(90,"div",32)(91,"div",33)(92,"button",34),e._uU(93,"Volver"),e.qZA(),e._uU(94,"\xa0 "),e.qZA()()()()()()(),e.TgZ(95,"div",35)(96,"div",36)(97,"div",37)(98,"div",38)(99,"div",3)(100,"div",39)(101,"h3"),e._uU(102,"Nueva propiedad"),e.qZA()()(),e.TgZ(103,"div",40)(104,"div",15)(105,"label"),e._uU(106,"Inmueble"),e.TgZ(107,"span",16),e._uU(108,"*"),e.qZA()(),e.TgZ(109,"input",41),e.NdJ("ngModelChange",function(l){return r.new_property=l}),e.qZA()()(),e.TgZ(110,"div",40)(111,"div",15)(112,"label"),e._uU(113,"Coeficiente "),e.TgZ(114,"span",16),e._uU(115,"*"),e.qZA()(),e.TgZ(116,"input",42),e.NdJ("ngModelChange",function(l){return r.new_coefficient=l}),e.qZA()()()(),e.TgZ(117,"div",3),e.YNc(118,K,8,2,"div",25),e.YNc(119,V,5,1,"div",25),e.qZA(),e.TgZ(120,"div",43)(121,"div",44)(122,"a",45,46),e.NdJ("click",function(){return r.closePopup()}),e._uU(124),e.ALo(125,"translate"),e.qZA(),e.YNc(126,G,3,3,"button",47),e.qZA()()()()(),e.TgZ(127,"div",48)(128,"div",36)(129,"div",37)(130,"div",38),e._UZ(131,"img",49),e.YNc(132,$,2,1,"h3",50),e.TgZ(133,"div",51)(134,"a",52,53),e._uU(136),e.ALo(137,"translate"),e.qZA(),e.TgZ(138,"button",54),e.NdJ("click",function(){return r.removeProperty()}),e._uU(139,"Borrar"),e.qZA()()()()()()()()),2&n&&(e.xp6(7),e.Q6J("routerLink",e.VKq(25,B,r.urbanisation_id)),e.xp6(22),e.Q6J("ngModel",r.name),e.xp6(7),e.Q6J("ngModel",r.urbanisation_name),e.xp6(7),e.Q6J("ngModel",r.building),e.xp6(7),e.Q6J("ngModel",r.floor),e.xp6(7),e.Q6J("ngModel",r.letter),e.xp6(7),e.Q6J("ngModel",r.total_coefficient),e.xp6(1),e.Q6J("ngIf",1==r.can_edit),e.xp6(1),e.Q6J("ngIf",""!=r.error_message),e.xp6(1),e.Q6J("ngIf",""!=r.success_message),e.xp6(3),e.Q6J("ngIf",""!=r.owner_id&&r.hasPermission("register_wallet")),e.xp6(19),e.Q6J("ngForOf",r.properties),e.xp6(3),e.Q6J("routerLink",e.VKq(27,X,r.urbanisation_id)),e.xp6(17),e.Q6J("ngModel",r.new_property),e.xp6(7),e.Q6J("ngModel",r.new_coefficient),e.xp6(2),e.Q6J("ngIf",""!=r.error_message_popup),e.xp6(1),e.Q6J("ngIf",""!=r.susccess_message_popup),e.xp6(5),e.Oqu(e.lcZ(125,21,"commun_translations.close")),e.xp6(2),e.Q6J("ngIf",""==r.susccess_message_popup),e.xp6(6),e.Q6J("ngIf",r.property_selected),e.xp6(4),e.Oqu(e.lcZ(137,23,"commun_translations.close")))},dependencies:[p.sg,p.O5,u.rH,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.F,g.X$]}),t})()}]}];let W=(()=>{const o=class{};let t=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(R),u.Bz]}),t})();var ee=c(80529),te=c(25108);let ie=(()=>{const o=class{};let t=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,W,d.u5,d.UX,ee.JF,u.Bz,te.m]}),t})()}}]);